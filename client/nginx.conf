# -------------------------------
# Configuration du serveur Nginx
# pour servir une application React/Vite
# -------------------------------

server {
  listen 80;                    # Le serveur √©coute sur le port 80 (HTTP)
  server_name localhost;        # Nom du serveur (pas utilis√© ici, mais requis par la syntaxe)

  root /usr/share/nginx/html;   # Dossier o√π sont stock√©s les fichiers statiques (build Vite)
  index index.html;             # Fichier par d√©faut √† servir

  # üîÅ Redirection pour applications React/Vite (SPA)
  # Si un utilisateur rafra√Æchit une route autre que "/", React a besoin qu'on renvoie index.html
  location / {
    try_files $uri /index.html;   # Essaie de servir le fichier demand√©, sinon renvoie index.html
  }

  # Redirige les 404 vers index.html (n√©cessaire pour les SPA)
  error_page 404 /index.html;

  # üîê Headers de s√©curit√© (fortement recommand√©s)
  # Emp√™che l'int√©gration de ton site dans une iframe (clickjacking)
  add_header X-Frame-Options "DENY"; # Emp√™ches n‚Äôimporte quel site de "voler" ton interface.

  # Emp√™che le navigateur de deviner le type MIME (protection contre les injections)
  add_header X-Content-Type-Options "nosniff";

  # Active une protection contre certaines attaques XSS (fonctionne dans Chrome/IE)
  add_header X-XSS-Protection "1; mode=block";

  # ‚ö° Compression des fichiers envoy√©s (gain de bande passante et vitesse)
  gzip on;    # Active la compression gzip

  # Liste des types MIME qui seront compress√©s
  gzip_types
    text/plain
    text/css
    application/json
    application/javascript
    text/xml
    application/xml
    application/xml+rss
    text/javascript;
}
